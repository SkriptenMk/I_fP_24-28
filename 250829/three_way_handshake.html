
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Beobachten von Internetverbindungen &#8212; Unterlagen für den Informatikunterricht in der Klasse 1fP</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '250829/three_way_handshake';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python Sockets: Ein Einfaches Client-Server Beispiel" href="../250905/sockets.html" />
    <link rel="prev" title="Top Level Domains und ihre Vergabe" href="../250822/tld.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/rb_notebook.svg" class="logo__image only-light" alt="Unterlagen für den Informatikunterricht in der Klasse 1fP - Home"/>
    <script>document.write(`<img src="../_static/rb_notebook.svg" class="logo__image only-dark" alt="Unterlagen für den Informatikunterricht in der Klasse 1fP - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Obligatorisches Fach Informatik (2fP)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Kryptologie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../250912/files.html">File Handling in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250912/caesar.html">Caesar Chiffre</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250919_vigenere/vigenere.html">Polyalphabetische Chiffren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250918_implementation/250918_python_implementation.html">Vigenère Chiffre in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250926_break_vigenere/break.html">Vigenère knacken</a></li>
<li class="toctree-l1"><a class="reference internal" href="../251031/asymmetrie.html">Asymetrische Verschlüsselung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../251114_rsa/rsa.html">RSA</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computernetzwerke</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../250822/netzwerke.html">Grundlagen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250822/tcpip.html">IP-Adressen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250822/nat.html">Network Address Translation (NAT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250822/tld.html">Top Level Domains (TLDs)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">TCP Verbindungsaufbau</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250905/sockets.html">Socket Programmierung in Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Datenbanken</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../250416/datenbank.html">Einführung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250507/sql.html">SQL Abfragen</a></li>
<li class="toctree-l1"><a class="reference external" href="https://sql-island.informatik.uni-kl.de/">SQL Übungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250521/lernziele.html">Lernziele</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Datenstrukturen und Codierung</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../250122/speicherstrukturen.html">Speicherstrukturen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250219/queue.html">Queues in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250305/bst.html">Binary Search Tree</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../250312/binaersystem.html">Das Binärsystem</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../250312/umrechnungen.html">Anwendungsübung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../250312/muloe_umrechnungen.html">Musterlösungen</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../250319/base64.html">Base64 Codierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../250326/lernziele.html">Lernziele</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Künstliche Intelligenz</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../251107/soziale_medien.html">The Social Dilemma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../251128/ki_beispiel.html">Was ist eine Künstliche Intelligenz?</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Anleitungen</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../anleitungen/python.html">Python Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../anleitungen/kurzanleitung_venv.html">Anleitung Python Virtual Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../anleitungen/jupyter.html">Anleitung Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../260109_plain_text_writing/plain_text_writing.html">Plain Text Writing</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Alte Programme</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../archiv/fs25.html">Programm FS 2025</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/SkriptenMk/I_fP_24-28" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/SkriptenMk/I_fP_24-28/issues/new?title=Issue%20on%20page%20%2F250829/three_way_handshake.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/250829/three_way_handshake.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Beobachten von Internetverbindungen</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aufzeichnen-von-netzwerkpaketen">Aufzeichnen von Netzwerkpaketen</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#beobachten-der-dns-anfragen">Beobachten der DNS-Anfragen</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtern-der-aufzeichnung">Filtern der Aufzeichnung</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analyse-der-gefilterten-pakete">Analyse der gefilterten Pakete</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#beobachtung-des-verbindungsaufbaus">Beobachtung des Verbindungsaufbaus</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="beobachten-von-internetverbindungen">
<h1>Beobachten von Internetverbindungen<a class="headerlink" href="#beobachten-von-internetverbindungen" title="Link to this heading">#</a></h1>
<p>Die folgenden Ausführungen basieren auf der Analyse von Netzwerkpaketen,
welche mit Wireshark aufgezeichnet wurden. Dafür ist die Installation von
Wireshark erforderlich. Die
<a href="https://www.wireshark.org/#download" target="_blank">
Website von Wireshark</a> stellt dazu den
entsprechenden Download zur Verfügung.</p>
<section id="aufzeichnen-von-netzwerkpaketen">
<h2>Aufzeichnen von Netzwerkpaketen<a class="headerlink" href="#aufzeichnen-von-netzwerkpaketen" title="Link to this heading">#</a></h2>
<p>Um Netzwerkpakete aufzuzeichnen, wird Wireshark gestartet. Das
Startfenster von Wireshark stellt sich folgendermassen dar:</p>
<p><img alt="Wireshark Startfenster" src="../_images/ws_start_window.png" /></p>
<p>Unter dem Titel “Aufzeichnen” kann der gewünschte Netzwerkadapter
ausgewählt und die Aufzeichnung gestartet werden. Die erfassten Pakete
werden in Echtzeit angezeigt und können später analysiert werden. In der
Schule wird die Verbindung zum Internet per WLAN hergestellt.
Entsprechend ist der WLAN-Adapter auszuwählen. Sobald der entsprechende
Adapter ausgewählt ist, kann die Aufzeichnung gestartet werden.
Gestartet wird die Aufzeichnung durch einen Klick auf das blaue
Haifischflossen-Symbol in der Symbolleiste. Die Aufzeichnung startet
umgehend. Angehalten wird die Aufzeichnung mit einem Klick auf das
rote Quadrat-Symbol in der Symbolleiste. Die Aufzeichnung kann entweder
über das Menü Datei &gt; Speichern, durch einen Klick auf das Dateisymbol
oder durch die Tastenkombination <code class="docutils literal notranslate"><span class="pre">Strg</span> <span class="pre">+</span> <span class="pre">S</span></code> gespeichert werden.</p>
</section>
<section id="beobachten-der-dns-anfragen">
<h2>Beobachten der DNS-Anfragen<a class="headerlink" href="#beobachten-der-dns-anfragen" title="Link to this heading">#</a></h2>
<section id="filtern-der-aufzeichnung">
<h3>Filtern der Aufzeichnung<a class="headerlink" href="#filtern-der-aufzeichnung" title="Link to this heading">#</a></h3>
<p>Um die DNS-Anfragen zu beobachten, wird bei laufender Wireshark
Aufzeichnung eine beliebige Website aufgerufen. Dadurch werden die
entsprechenden DNS-Anfragen erfasst und können in Wireshark
analysiert werden. Nach dem Aufruf der Website kann die Aufzeichnung
angehalten und die erfassten Pakete analysiert werden (wenn die
Aufzeichnung weiterläuft, bewegen sich die Pakete im Anzeigefenster
ständig weiter).</p>
<p>Damit die relevanten Datenpakete angezeigt werden, kann der
aufgezeichnete Datenverkehr gefiltert werden. Der Filter wird in der
Eingabefeld für “Anzeigefilter” eingegeben.</p>
<p><img alt="Wireshark Anzeigefilter" src="../_images/ws_anzeigefilter.png" /></p>
<p>Der entsprechende Filter für DNS-Anfragen zu einer gegebenen Website
lautet</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>dns.qry.name == &quot;www.example.com&quot;
</pre></div>
</div>
<p>Der angewendete Filterbefehl ist relativ einfach nachzuvollziehen.
An erster Stelle steht hier das Protokoll, nach dem gefiltert wird. Weil
nach den DNS-Anfragen gefiltert wird, ist das hier <code class="docutils literal notranslate"><span class="pre">dns</span></code>. <code class="docutils literal notranslate"><span class="pre">dns</span></code> alleine
wäre bereits ein gültiger Filter. Allerdings werden dann alle DNS-Pakete
angezeigt. Der Filter wird daher zu <code class="docutils literal notranslate"><span class="pre">dns.qry.name</span></code> ergänzt Dabei steht
<code class="docutils literal notranslate"><span class="pre">qry</span></code> als Abkürzung für query - Anfrage. Die Ergänzung <code class="docutils literal notranslate"><span class="pre">name</span></code> steht für den Domain Name,
der Abgefragt wird. <code class="docutils literal notranslate"><span class="pre">==</span></code> ist die logische Verknüpfung, nach der gefiltert wird
und bedeutet hier “ist gleich”. Zwischen den Anführungszeichen steht der
String, nach dem gesucht wird.<br />
Sofern die Seite während der Aufzeichnung genau
einmal aufgerufen wurde, wird der Filter zwei Pakete anzeigen: eine
DNS-Anfrage und eine DNS-Antwort.</p>
<p><img alt="Gefilterte Wireshark-Pakete" src="../_images/ws_dns_query.png" /></p>
<p>Das Bild zeigt als erstes Paket die DNS-Anfrage für
www.deutschegrammaphon.com und als zweites Paket die entsprechende
Antwort.</p>
</section>
<section id="analyse-der-gefilterten-pakete">
<h3>Analyse der gefilterten Pakete<a class="headerlink" href="#analyse-der-gefilterten-pakete" title="Link to this heading">#</a></h3>
<p>Für eine genaue Analyse der Kommunikation kann ein einzelnes Paket
durch anklicken ausgewählt werden. Dadurch wird das Paket im unteren
Bereich von Wireshark detailliert angezeigt und kann genauer
untersucht werden.</p>
<p><img alt="Inhalt des Ausgewählten Pakets" src="../_images/ws_selected_package.png" /></p>
<p>Dass es sich hier im Bild um die Details des ausgewählten Paketes
handelt, ist an der übereinstimmenden Paketnummer zu erkennen. Die
Zeilen in der
Detailansicht entsprechen den einzelnen Protokoll-Header-Feldern des
ausgewählten Paketes. Das bildet auch das TCP/IP Schichtenmodell ab.</p>
<p>Die Detailansicht kann durch einen Klick auf die Dreiecke am Anfang der
einzelnen Protokoll-Header-Felder erweitert werden. Dadurch werden
weitere Informationen zu den jeweiligen Feldern angezeigt. Hier werden
jedoch nur die Zusammenfassungen der Header-Felder erläutert.</p>
<p>Im Beispiel wird als erstes der Inhalt des Headers des Internetlayers erläutert.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Internet Protocol Version 4, Src: 192.168.1.108, Dst: 192.168.1.1
</pre></div>
</div>
<p>In der Zusammenfassung werden die Quell- und
Ziel-Adressen des IP-Pakets angezeigt. Im vorliegenden Fall sind das jeweils die
Privaten IP-Adressen 192.168.1.108 und 192.168.1.1. 192.168.1.108
ist die Quell-Adresse, erkennbar an der Abkürzung “Src” und 192.168.1.1
die Ziel-Adresse, erkennbar an der Abkürzung “Dst”. Beide Geräte
befinden sich damit im gleichen LAN. Der Rechner mit der IP-Adresse
192.168.1.1 ist der Router. Dieses Gerät stellt die Internetverbindung
her und kann DNS-Anfragen aus seinem Cache beantworten.</p>
<p>Im Header für das User Datagram Protocol (UDP) werden die Quell- und
Ziel-Ports angezeigt.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>User Datagram Protocol, Src Port: 53586, Dst Port: 53
</pre></div>
</div>
<p>Der Quellport wurde mit 53586 automatisch und weit oberhalb der sog.
“Well-Known Ports” (0-1023) gewählt. Die “Well-Known Ports” sind Ports,
die von bestimmten Anwendungen oder Diensten standardmässig verwendet
werden. Entsprechend wurde der Zielport auf 53 gewählt, da dies der
standardmässige Port für DNS-Anfragen ist. Eine Liste der “Well-Known Ports”
findet sich in der
<a
href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml"
target="_blank">
offiziellen IANA-Portdatenbank</a>. Der Quellport ermöglicht es dem
Zielsystem, die Antwort an den korrekten Absender zurückzusenden.
NAT-Geräte (vgl.
<a class="reference internal" href="../250822/nat.html"><span class="std std-doc">Abschnitt Network Address Translation (NAT)</span></a>)
nutzen diese Port-Informationen zusätzlich für die Zuordnung
zwischen privaten und öffentlichen Adressen.</p>
<p>Der zuunterst dargestellte Layer in der Detailansicht, beinhaltet die
eigentliche Anfrage für die Übersetzung des Domainnamens in eine
IP-Adresse.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Domain Name System (query)
    Transaction ID: 0x1f7a
    Flags: 0x0100 Standard query
    Questions: 1
    Answer RRs: 0
    Authority RRs: 0
    Additional RRs: 0
    Queries
        www.deutschegrammophon.com: type A, class IN
    [Response In: 723]
</pre></div>
</div>
<p>Aus diesem Grund wird dieser Teil der Analyse hier auch aufgefaltet
dargestellt.<br />
Unter dem Stichwort <code class="docutils literal notranslate"><span class="pre">Queries</span></code> wird die gesuchte Adresse
<code class="docutils literal notranslate"><span class="pre">www.deutschegrammophon.com</span></code> angezeigt. Das Stichwort <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">A</span></code> zeigt an,
dass es sich hier um eine Anfrage nach einer IPv4-Adresse handelt.
IPv4-Adressen werden mit <code class="docutils literal notranslate"><span class="pre">A</span></code> bezeichnet, IPv6 mit <code class="docutils literal notranslate"><span class="pre">AAAA</span></code>. Das letzte
Element in dieser Zeile ist die Klasse der Anfrage, in diesem Fall <code class="docutils literal notranslate"><span class="pre">IN</span></code>
für das Internet. Obwohl heute fast ausschliesslich das Internet als
Netzwerktyp verwendet wird, ist das Feld für die Klasse (IN) aus
historischen Gründen weiterhin Teil jeder DNS-Anfrage.</p>
<p>Der entsprechende Inhalt der Antwort sieht folgendermassen aus:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Domain Name System (response)
    Transaction ID: 0x1f7a
    Flags: 0x8180 Standard query response, No error
    Questions: 1
    Answer RRs: 1
    Authority RRs: 0
    Additional RRs: 0
    Queries
        www.deutschegrammophon.com: type A, class IN
    Answers
        www.deutschegrammophon.com: type A, class IN, addr 85.236.46.65
</pre></div>
</div>
<p>Das Paket wiederholt die Frage und liefert die Antwort des DNS-Servers.
Der Domainname <code class="docutils literal notranslate"><span class="pre">www.deutschegrammophon.com</span></code> ist mit der IPv4-Adresse
<code class="docutils literal notranslate"><span class="pre">85.236.46.65</span></code> verknüpft.</p>
<p>Damit kann die Verbindung zur Website <code class="docutils literal notranslate"><span class="pre">www.deutschegrammophon.com</span></code>
hergestellt werden.</p>
</section>
</section>
<section id="beobachtung-des-verbindungsaufbaus">
<h2>Beobachtung des Verbindungsaufbaus<a class="headerlink" href="#beobachtung-des-verbindungsaufbaus" title="Link to this heading">#</a></h2>
<p>Der Verbindungsaufbau zwischen Client (lokaler Rechner) und Server
(Rechner im Internet) erfolgt in mehreren
Schritten, die im sogenannten “Three-Way Handshake” zusammengefasst
werden. Dieser Prozess stellt sicher, dass beide Seiten bereit sind,
Daten zu senden und zu empfangen. Die folgende Abbildung zeigt eine
schematische Darstellung des “Three-Way Handshake”.</p>
<p><img alt="Schema Three-Way Handshake" src="../_images/schema_three-way-handshake.png" /></p>
<p>Der Client sendet ein SYN-Paket an den Server, um eine Verbindung
anzufordern. Dieser atwortet mit einem SYN-ACK-Paket. Das heisst, er
bestätigt die Anfrage mit einem ACK und fragt seinerseits mit
einem SYN nach, ob der Client (immer noch) bereit ist, die
Verbindung aufzubauen. Damit klar ist, dass sich das ACK im
SYN-ACK-Paket auf das ursprüngliche SYN-Paket bezieht, werden die
einzelnen Pakete mit einer Sequenznummer (Sequence Number) versehen. Das
ACK gibt die Sequenznummer des SYN-Paketes plus eins zurück.</p>
<p>Dieser Vorgang kann mit Wireshark beobachtet werden. Dafür braucht es
einen kombinierten Wireshark Anzeigefilter. Als Beispiel wird der
Verbindungsaufbau zwischen dem lokalen Rechner und der Website von
www.deutschegrammophon.com betrachtet. Der erste Teil des Filters soll
nur jene Pakete anzeigen, welche mit der IP-Adresse des Servers von
www.deutschegrammophon.com (85.236.46.65) kommunizieren. Dieser Filter lautet</p>
<div class="highlight-wireshark notranslate"><div class="highlight"><pre><span></span>ip.addr == 85.236.46.65
</pre></div>
</div>
<p>Dieser Filter alleine zeigt jedoch noch zu viele Pakete an.</p>
<p><img alt="ip.addr Filter" src="../_images/ws_ip-addr-Filter.png" /></p>
<p>Um die Resultate weiter einzuschränken sollen nur jene Pakete angezeigt
werden, welche entweder das SYN-Flag oder das ACK-Flag (oder beides)
gesetzt haben. Dies kann mit folgendem Filter erreicht werden:</p>
<div class="highlight-wireshark notranslate"><div class="highlight"><pre><span></span>ip.addr == 85.236.46.65 and (tcp.flags.syn == 1 or tcp.flags.ack == 1 )
</pre></div>
</div>
<p>Das sind allerdings immer noch zu viele Pakete. Daher sollen nur jene
Pakete angezeigt werden, welche die Antworten auf eine SYN-Anfrage sind.
Das kann erreicht werden, in dem ein Paket mit dem SYN-Flag mit der
rechten Maustaste angeklickt wird und die Option “Follow” &gt; “TCP Stream”
ausgewählt wird. Dadurch wird der gesamte TCP-Stream, in dem dieses
Paket steht, (die aufeinanderfolgenden Pakete) angezeigt. Der Filter
wird automatisch angepasst.</p>
<p>Das folgende Listing zeigt den ganzen Filterbefehl für die Anzeige der
Pakete, die zu diesem TCP-Stream gehören:</p>
<div class="highlight-wireshark notranslate"><div class="highlight"><pre><span></span>ip.addr == 85.236.46.65 and (tcp.flags.syn == 1 or tcp.flags.ack == 1) and !(tcp.stream eq 8)
</pre></div>
</div>
<p><img alt="Three-Way Handshake Pakete" src="../_images/ws_three-way-handshake.png" /></p>
<p>Dass die Pakte die Kommunikationsfolge des Three-Way Handshakes zeigen,
ist an den gesetzten Flags zu erkennen. Im ersten Schritt sendet der
Client ein SYN-Paket, worauf der Server mit einem SYN-ACK-Paket
antwortet. Der Client bestätigt dies mit einem ACK-Paket. Diese drei
Schritte sind im Wireshark-Filter sichtbar. Gut zu erkennen sind die
jeweiligen Portnummern, die in den TCP-Paketen verwendet werden.</p>
<p>Anschliessend an diesen “Three-Way Handshake” kann der Client mit dem
Server kommunizieren.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./250829"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../250822/tld.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Top Level Domains und ihre Vergabe</p>
      </div>
    </a>
    <a class="right-next"
       href="../250905/sockets.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Python Sockets: Ein Einfaches Client-Server Beispiel</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aufzeichnen-von-netzwerkpaketen">Aufzeichnen von Netzwerkpaketen</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#beobachten-der-dns-anfragen">Beobachten der DNS-Anfragen</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtern-der-aufzeichnung">Filtern der Aufzeichnung</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analyse-der-gefilterten-pakete">Analyse der gefilterten Pakete</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#beobachtung-des-verbindungsaufbaus">Beobachtung des Verbindungsaufbaus</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jacques Mock Schindler
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>